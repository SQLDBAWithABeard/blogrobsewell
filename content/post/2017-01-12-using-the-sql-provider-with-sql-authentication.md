---
title: "Using the PowerShell SQL Provider with SQL Authentication"
date: "2017-01-12" 
categories:
  - Blog

tags:
  - PowerShell
  - psdrive

---
<P>Whilst having a conversation with <A href="https://twitter.com/cl" target=_blank>Chrissy LeMaire</A>&nbsp;last week about using the SQL Provider. She asked if it could use SQL Authentication. I had no idea but said I would find out. This is how and what I did.</P>
<P>I am going to demonstrate this in <A href="https://code.visualstudio.com/" target=_blank>Visual Studio Code</A> with the <A href="https://blogs.msdn.microsoft.com/powershell/2015/11/16/announcing-powershell-language-support-for-visual-studio-code-and-more/?WT.mc_id=DP-MVP-5002693" target=_blank>PowerShell extension installed</A> but I have also&nbsp;tested this in PowerShell version 5.1.14393.576 on Windows 10 and PowerShell Version 5.0.10586.117&nbsp;on Windows 8.1 but it will work across other versions I believe</P>
<P>First we need to import the sqlserver module</P><PRE class="lang:ps decode:true">Import-Module sqlserver
</PRE>
<P>Then if we run Get-PSDrive we can see our SQL Server PS Drive</P>
<P><IMG class="alignnone size-full wp-image-3156" alt="get psdrive.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive.png?resize=630%2C280&amp;ssl=1" width=630 height=280 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive.png?fit=630%2C280&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive.png?fit=300%2C134&amp;ssl=1" data-image-description="" data-image-title="get-psdrive" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1319,587" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive.png?fit=1319%2C587&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/get-psdrive/#main" data-attachment-id="3156"></P>
<P>A quick dir and we can see what is in that drive</P>
<P><IMG class="alignnone size-full wp-image-3160" alt=get-psdrive src="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive1.png?resize=630%2C280&amp;ssl=1" width=630 height=280 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive1.png?fit=630%2C280&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive1.png?fit=300%2C134&amp;ssl=1" data-image-description="" data-image-title="get-psdrive" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1319,587" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psdrive1.png?fit=1319%2C587&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/get-psdrive-2/#main" data-attachment-id="3160"></P>
<P>We can navigate this like it is a file system. For example, below I have changed<BR>to the ‚ÄòSQL directory‚Äô run dir and found the machine name ROB-SURFACEBOOK and then<BR>changed to that ‚Äòdirectory‚Äô and dir to find the instances, navigated to the default<BR>instance and run dir to see what is available</P>
<P><IMG class="alignnone size-full wp-image-3164" alt=cds src="https://blog.robsewell.com/assets/uploads/2017/01/cds.png?resize=565%2C724&amp;ssl=1" width=565 height=724 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/cds.png?fit=565%2C724&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/cds.png?fit=234%2C300&amp;ssl=1" data-image-description="" data-image-title="cds" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="565,724" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/cds.png?fit=565%2C724&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/cds/#main" data-attachment-id="3164"></P>
<P>This would enable me to do this to get the database names for example</P>
<P><IMG class="alignnone size-full wp-image-3173" alt=dir-databases src="https://blog.robsewell.com/assets/uploads/2017/01/dir-databases.png?resize=630%2C218&amp;ssl=1" width=630 height=218 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/dir-databases.png?fit=630%2C218&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/dir-databases.png?fit=300%2C104&amp;ssl=1" data-image-description="" data-image-title="dir-databases" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="799,276" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/dir-databases.png?fit=799%2C276&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/dir-databases/#main" data-attachment-id="3173"></P>
<P>You can connect to remote SQL instances in the same manner by running</P><PRE class="lang:ps decode:true">CD SQLSERVER:\SQL\SERVERNAME
</PRE>
<P>However I don‚Äôt have permission using this account</P>
<P><IMG class="alignnone size-full wp-image-3181" alt="failed to connect.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/failed-to-connect.png?resize=630%2C194&amp;ssl=1" width=630 height=194 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/failed-to-connect.png?fit=630%2C194&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/failed-to-connect.png?fit=300%2C92&amp;ssl=1" data-image-description="" data-image-title="failed-to-connect" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1330,409" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/failed-to-connect.png?fit=1330%2C409&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/failed-to-connect/#main" data-attachment-id="3181"></P>
<P>We need to create a new PS Drive so first, as always, start with Get-Help</P>
<P><IMG class="alignnone size-full wp-image-3184" alt="get-help new-psdrive.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/get-help-new-psdrive.png?resize=630%2C295&amp;ssl=1" width=630 height=295 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/get-help-new-psdrive.png?fit=630%2C295&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/get-help-new-psdrive.png?fit=300%2C141&amp;ssl=1" data-image-description="" data-image-title="get-help-new-psdrive" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1407,659" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/get-help-new-psdrive.png?fit=1407%2C659&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/get-help-new-psdrive/#main" data-attachment-id="3184"></P>
<P>So we can create a new PS Drive with&nbsp; a credential</P>
<BLOCKQUOTE>
<P>Parameters<BR>-Credential Specifies a user account that has permission to perform this action. The default is the current user.</P></BLOCKQUOTE>
<P>Does it accept SQL Server?</P>
<BLOCKQUOTE>
<P>Notes<BR>New-PSDrive is designed to work with the data exposed by any provider. To list the providers available in your session, use Get-PSProvider.</P></BLOCKQUOTE>
<P><IMG class="alignnone size-full wp-image-3192" alt=get-psprovider.PNG src="https://blog.robsewell.com/assets/uploads/2017/01/get-psprovider.png?resize=630%2C198&amp;ssl=1" width=630 height=198 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psprovider.png?fit=630%2C198&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psprovider.png?fit=300%2C94&amp;ssl=1" data-image-description="" data-image-title="get-psprovider" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1260,395" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/get-psprovider.png?fit=1260%2C395&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/get-psprovider/#main" data-attachment-id="3192"></P>
<P>Yes it does üôÇ</P>
<P>So we can add a new PSDrive using</P><PRE class="lang:ps decode:true">&nbsp;New-PSDrive -Name SQL2016N1-SQLAuth -PSProvider Sqlserver `
 -Root SQLSERVER:\SQL\SQL2016N1 -Description 'This is the SQL2016N1 SQL `
PSDrive using the  SQL Authenticated login DemoLogin' -Credential Get-Credential
</PRE>
<P><IMG class="alignnone size-full wp-image-3200" alt="add psdrive.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/add-psdrive.png?resize=630%2C176&amp;ssl=1" width=630 height=176 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/add-psdrive.png?fit=630%2C176&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/add-psdrive.png?fit=300%2C84&amp;ssl=1" data-image-description="" data-image-title="add-psdrive" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1341,374" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/add-psdrive.png?fit=1341%2C374&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/add-psdrive/#main" data-attachment-id="3200"></P>
<P>Which will prompt us for a credential. Once we enter the credential we will have our SQL Server drive&nbsp;for that instance</P>
<P><IMG class="alignnone size-full wp-image-3204" alt=access-denied src="https://blog.robsewell.com/assets/uploads/2017/01/access-denied.png?resize=630%2C273&amp;ssl=1" width=630 height=273 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/access-denied.png?fit=630%2C273&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/access-denied.png?fit=300%2C130&amp;ssl=1" data-image-description="" data-image-title="access-denied" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1355,588" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/access-denied.png?fit=1355%2C588&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/access-denied/#main" data-attachment-id="3204"></P>
<P>Except we won‚Äôt !! This is because the account that VS Code (or PowerShell) is running does not have permissions on the SQL Server. So I need to run VS Code (or PowerShell) as a user with those permissions by right clicking on the icon whilst holding shift down and clicking run as different user. Obviously you won‚Äôt need to do this if the current logged on user has permission on the remote SQL Server</P>
<P><IMG class="alignnone size-full wp-image-3209" alt=right-click-run-as-different-user src="https://blog.robsewell.com/assets/uploads/2017/01/right-click-run-as-different-user1.png?resize=388%2C800&amp;ssl=1" width=388 height=800 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/right-click-run-as-different-user1.png?fit=388%2C800&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/right-click-run-as-different-user1.png?fit=146%2C300&amp;ssl=1" data-image-description="" data-image-title="right-click-run-as-different-user" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="388,800" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/right-click-run-as-different-user1.png?fit=388%2C800&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/right-click-run-as-different-user/#main" data-attachment-id="3209"></P>
<P>and then enter the credentials of the user</P>
<P><IMG class="alignnone size-full wp-image-3214" alt=creds src="https://blog.robsewell.com/assets/uploads/2017/01/creds.png?resize=468%2C384&amp;ssl=1" width=468 height=384 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/creds.png?fit=468%2C384&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/creds.png?fit=300%2C246&amp;ssl=1" data-image-description="" data-image-title="creds" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="468,384" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/creds.png?fit=468%2C384&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/creds/#main" data-attachment-id="3214"></P>
<P>Now that we are running as the correct user</P>
<P><IMG class="alignnone size-full wp-image-3220" alt=whoami src="https://blog.robsewell.com/assets/uploads/2017/01/whoami.png?resize=229%2C45&amp;ssl=1" width=229 height=45 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/whoami.png?fit=229%2C45&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/whoami.png?fit=229%2C45&amp;ssl=1" data-image-description="" data-image-title="whoami" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="229,45" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/whoami.png?fit=229%2C45&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/whoami/#main" data-attachment-id="3220"><BR>We repeat the code from above and we will have our PS Drive</P>
<P><IMG class="alignnone size-full wp-image-3225" alt="need an instance.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/need-an-instance.png?resize=630%2C51&amp;ssl=1" width=630 height=51 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/need-an-instance.png?fit=630%2C51&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/need-an-instance.png?fit=300%2C24&amp;ssl=1" data-image-description="" data-image-title="need-an-instance" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1782,145" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/need-an-instance.png?fit=1782%2C145&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/need-an-instance/#main" data-attachment-id="3225"></P>
<P>Nope üôÇ This time we get the following error</P>
<BLOCKQUOTE>
<P>New-PSDrive : SQL Server PowerShell provider error: The root path for a drive with credentials needs to include the instance name.</P></BLOCKQUOTE>
<P>which makes sense if you think about it as the credentials will only be valid at instance level</P>
<P>So we will add the instance name to the command. As this is the default instance we add DEFAULT</P><PRE class="lang:ps decode:true">New-PSDrive -Name SQL2016N1-SQLAuth -PSProvider Sqlserver `
-Root SQLSERVER:\SQL\SQL2016N1\DEFAULT -Description 'This is the SQL2016N1 SQL `
PSDrive using the&nbsp; SQL Authenticated login DemoLogin' -Credential Get-Credential
</PRE>
<P><IMG class="alignnone size-full wp-image-3230" alt=we-have-a-new-psdrive src="https://blog.robsewell.com/assets/uploads/2017/01/we-have-a-new-psdrive.png?resize=630%2C47&amp;ssl=1" width=630 height=47 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/we-have-a-new-psdrive.png?fit=630%2C47&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/we-have-a-new-psdrive.png?fit=300%2C22&amp;ssl=1" data-image-description="" data-image-title="we-have-a-new-psdrive" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1813,135" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/we-have-a-new-psdrive.png?fit=1813%2C135&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/we-have-a-new-psdrive/#main" data-attachment-id="3230"></P>
<P>Success!! So we will be able to see it in our list of PS Drives using Get-PSDrive</P>
<P><IMG class="alignnone size-full wp-image-3237" alt="sql auth psdrive.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/sql-auth-psdrive.png?resize=630%2C286&amp;ssl=1" width=630 height=286 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/sql-auth-psdrive.png?fit=630%2C286&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/sql-auth-psdrive.png?fit=300%2C136&amp;ssl=1" data-image-description="" data-image-title="sql-auth-psdrive" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="705,320" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/sql-auth-psdrive.png?fit=705%2C320&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/sql-auth-psdrive/#main" data-attachment-id="3237"></P>
<P>and we can see further details like this</P>
<P><IMG class="alignnone size-full wp-image-3252" alt=details.PNG src="https://blog.robsewell.com/assets/uploads/2017/01/details.png?resize=630%2C193&amp;ssl=1" width=630 height=193 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/details.png?fit=630%2C193&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/details.png?fit=300%2C92&amp;ssl=1" data-image-description="" data-image-title="details" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="782,240" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/details.png?fit=782%2C240&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/details/#main" data-attachment-id="3252"></P>
<P>and we can navigate to it using cd NAMEOFDRIVE</P>
<P><IMG class="alignnone size-full wp-image-3240" alt=dir-sqlauth src="https://blog.robsewell.com/assets/uploads/2017/01/dir-sqlauth.png?resize=349%2C372&amp;ssl=1" width=349 height=372 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/dir-sqlauth.png?fit=349%2C372&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/dir-sqlauth.png?fit=281%2C300&amp;ssl=1" data-image-description="" data-image-title="dir-sqlauth" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="349,372" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/dir-sqlauth.png?fit=349%2C372&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/dir-sqlauth/#main" data-attachment-id="3240"></P>
<P>and perform our tasks</P>
<P><IMG class="alignnone size-full wp-image-3244" alt="databases and logins.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/databases-and-logins.png?resize=414%2C542&amp;ssl=1" width=414 height=542 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/databases-and-logins.png?fit=414%2C542&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/databases-and-logins.png?fit=229%2C300&amp;ssl=1" data-image-description="" data-image-title="databases-and-logins" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="414,542" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/databases-and-logins.png?fit=414%2C542&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/databases-and-logins/#main" data-attachment-id="3244"></P>
<P>If you take a look at the SQL Server you will see that all that is being run is T-SQL</P>
<P><IMG class="alignnone size-full wp-image-3268" alt="its just tsql.PNG" src="https://blog.robsewell.com/assets/uploads/2017/01/its-just-tsql.png?resize=630%2C162&amp;ssl=1" width=630 height=162 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/01/its-just-tsql.png?fit=630%2C162&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/01/its-just-tsql.png?fit=300%2C77&amp;ssl=1" data-image-description="" data-image-title="its-just-tsql" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1262,325" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/01/its-just-tsql.png?fit=1262%2C325&amp;ssl=1" data-permalink="https://blog.robsewell.com/using-the-sql-provider-with-sql-authentication/its-just-tsql/#main" data-attachment-id="3268"></P>
<P>Unfortunately you cannot use the persist parameter with a SQLSERVER provider to persist the mapping across sessions</P>
<P>This post has shown you how to set up SQL Server PS Drives using SQL Authentication. The important points are</P>
<UL>
<LI>Use Get-Help New-PSDrive -ShowWindow for all the help and examples 
<LI>You must be running PowerShell or VS Code as a user with Windows Permissions on the SQL Server 
<LI>You must specify the instance name 
<LI>Use ‚ÄúNew-PSDrive -Name&nbsp;PSDRIVENAME -PSProvider SqlServer -Root SQLSERVER:\SQL\SERVER\INSTANCE -Description ‚ÄòDESCRIPTION‚Äô -Credential Get-Credential‚Äù 
<LI>You can then navigate the remote SQL Server like a file directory from the command line using SQL Authentication 
<LI>It‚Äôs just running T-SQL against the instance </LI></UL>

