---
title: "SQL VNext sp_configure on Windows and Linux with dbatools"
categories:
  - Blog

tags:
  - automate
  - automation
  - dbatools
  - document
  - documentation
  - linux
  - PowerShell
  - script
  - smo
  - sp_configure

---
<P>This weekend I set up some <A href="https://blogs.technet.microsoft.com/dataplatforminsider/2017/02/17/sql-server-next-version-ctp-1-3-now-available/?WT.mc_id=DP-MVP-5002693" target=_blank>SQL vNext</A> virtual machines, two on Windows and one on Linux so that I could test some scenarios and build an availability group.</P>
<P>IMPORTANT NOTE :- The names of dbatools commands with a Sql prefix WILL CHANGE in a later release of dbatools.&nbsp;dbatools will&nbsp;use Dba throughout in the future as the <A href="https://msdn.microsoft.com/en-us/library/hh245198.aspx?WT.mc_id=DP-MVP-5002693" target=_blank>sqlserver PowerShell module </A>uses the Sql prefix</P>
<P>I used PowerShell version 5.1.14393.693&nbsp;and <A href="https://blogs.technet.microsoft.com/dataplatforminsider/2017/02/17/sql-server-next-version-ctp-1-3-now-available/?WT.mc_id=DP-MVP-5002693" target=_blank>SQL Server vNext CTP 1.3 </A>running on Windows Server 2016 and Ubuntu 16.04 in this blog post</P>
<P>I set up&nbsp;one Windows box with some changes to the default configuration, these are for my lab only.</P>
<P>Min Server Memory to 2Gb<BR>Max Server Memory to 6Gb<BR>Remote Admin Connections to 1<BR>Backup Compression to 1<BR>Ad Hoc Distributed Queries to 1</P>
<P>I can do this in PowerShell by creating a <A href="https://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.aspx?WT.mc_id=DP-MVP-5002693" target=_blank>SQL SMO Server object</A> using <A href="https://dbatools.io/Connect-DbaSqlServer" target=_blank>Connect-DbaSqlServer </A>from dbatools and then altering the Configuration Properties values and calling the Alter() method</P>
<DIV><PRE class="lang:ps decode:true">$WinSQl1 = 'SQLvNextN1'
$win1 = Connect-DbaSqlServer -SqlServer $WinSQl1
$win1.Configuration.Properties['DefaultBackupCompression'].ConfigValue = 1
$win1.Configuration.Properties['MinServerMemory'].ConfigValue = 2048
$win1.Configuration.Properties['MaxServerMemory'].ConfigValue = 6144
$win1.Configuration.Properties['RemoteAccess'].ConfigValue = 1
$win1.Configuration.Properties['OptimizeAdhocWorkloads'].ConfigValue = 1
$win1.Configuration.Alter()</PRE></DIV>
<DIV></DIV>
<P>I can see the change by using the <A href="https://dbatools.io/functions/get-dbaspconfigure/" target=_blank>Get-DbaSpConfigure </A>from the&nbsp;<A href="https://dbatools.io/" target=_blank>popular PowerShell module dbatools</A>. I like to output to <A href="https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.utility/out-gridview?WT.mc_id=DP-MVP-5002693" target=_blank>Out-GridView</A> (Alias ogv at the CLI)</P><PRE class="lang:ps decode:true">$WinSQl1 = 'SQLvNextN1'
Get-DbaSpConfigure -SqlServer $WinSQl1 | ogv</PRE>
<P><IMG class="alignnone size-full wp-image-3477" alt="1 SPConfig ogv.PNG" src="https://blog.robsewell.com/assets/uploads/2017/02/1-spconfig-ogv.png?resize=630%2C317&amp;ssl=1" width=630 height=317 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/1-spconfig-ogv.png?fit=630%2C317&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/1-spconfig-ogv.png?fit=300%2C151&amp;ssl=1" data-image-description="" data-image-title="1-spconfig-ogv" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1423,717" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/1-spconfig-ogv.png?fit=1423%2C717&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/1-spconfig-ogv/#main" data-attachment-id="3477"></P>
<P>Out-GridView can filter in the top bar and it works very quickly. It is a very useful tool</P>
<P><IMG class="alignnone size-full wp-image-3476" alt="2 - ogv filter.gif" src="https://blog.robsewell.com/assets/uploads/2017/02/2-ogv-filter.gif?resize=630%2C297&amp;ssl=1" width=630 height=297 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/2-ogv-filter.gif?fit=630%2C297&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/2-ogv-filter.gif?fit=300%2C141&amp;ssl=1" data-image-description="" data-image-title="2-ogv-filter" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1845,870" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/2-ogv-filter.gif?fit=1845%2C870&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/2-ogv-filter/#main" data-attachment-id="3476"></P>
<P>You can also rearrange the columns and use the Add Criteria button to filter your results</P>
<P><IMG class="alignnone size-full wp-image-3480" alt=3-spconfig-ogv src="https://blog.robsewell.com/assets/uploads/2017/02/3-spconfig-ogv.png?resize=630%2C310&amp;ssl=1" width=630 height=310 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/3-spconfig-ogv.png?fit=630%2C310&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/3-spconfig-ogv.png?fit=300%2C148&amp;ssl=1" data-image-description="" data-image-title="3-spconfig-ogv" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1490,734" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/3-spconfig-ogv.png?fit=1490%2C734&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/3-spconfig-ogv/#main" data-attachment-id="3480"></P>
<P>You can use <A href="https://dbatools.io/functions/export-sqlspconfigure/" target=_blank>Export-SQLSpConfigure</A> to export the configuration to a .sql file which is useful for DR or documentation purposes. There is also a corresponding <A href="https://dbatools.io/Import-SqlSpConfigure" target=_blank>Import-SqlSpConfigure </A>command</P><PRE class="lang:ps decode:true">$WinSQl1 = 'SQLvNextN1'
$WinConfigPath = 'C:\Temp\Winconfig.sql'
Export-SqlSpConfigure -SqlServer $WinSQl1 -Path $winConfigPath
notepad $winConfigPath</PRE>
<P><IMG class="alignnone size-full wp-image-3497" alt="4 - Export-SQLSpConfigure.gif" src="https://blog.robsewell.com/assets/uploads/2017/02/4-export-sqlspconfigure.gif?resize=630%2C242&amp;ssl=1" width=630 height=242 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/4-export-sqlspconfigure.gif?fit=630%2C242&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/4-export-sqlspconfigure.gif?fit=300%2C115&amp;ssl=1" data-image-description="" data-image-title="4-export-sqlspconfigure" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1845,710" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/4-export-sqlspconfigure.gif?fit=1845%2C710&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/4-export-sqlspconfigure/#main" data-attachment-id="3497"></P>
<P>Chrissy LeMaire <A href="https://blog.netnerds.net/author/chrissy/" target=_blank>b </A>| <A href="https://twitter.com/cl?lang=en" target=_blank>t </A>showed a neat trick when we were in Utrecht to compare the configuration of two servers</P>
<DIV><PRE class="lang:ps decode:true">$WinSQl1 = 'SQLvNextN1'
$WinSQl2 = 'SQLvNextN2'
$Win1SPConfigure = Get-DbaSpConfigure -SqlServer $WinSQl1
$Win2SPConfigure = Get-DbaSpConfigure -SqlServer $WinSQl2
$propcompare = foreach ($prop in $Win1SPConfigure) {
[pscustomobject]@{
Config = $prop.DisplayName
'Windows Node1 setting' = $prop.RunningValue
'Windows Node2 Setting' = $Win2SPConfigure | Where DisplayName -eq $prop.DisplayName | Select -ExpandProperty RunningValue
}
}
$propcompare | ogv</PRE></DIV>
<DIV></DIV>
<DIV>So when we compare the two Windows SQL nodes we can see that at this point there are differences in the configuration</DIV>
<DIV><IMG class="alignnone size-full wp-image-3512" alt=5-compare-configures src="https://blog.robsewell.com/assets/uploads/2017/02/5-compare-configures.gif?resize=630%2C275&amp;ssl=1" width=630 height=275 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/5-compare-configures.gif?fit=630%2C275&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/5-compare-configures.gif?fit=300%2C131&amp;ssl=1" data-image-description="" data-image-title="5-compare-configures" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1845,806" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/5-compare-configures.gif?fit=1845%2C806&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/5-compare-configures/#main" data-attachment-id="3512"></DIV>
<P>&nbsp;</P>
<P>Now we can copy the configuration from SQLvNextN1 to SQLvNextN2 using the <A href="https://dbatools.io/Copy-SqlSpConfigure" target=_blank>Copy-SqlSpConfigure </A>command</P><PRE class="lang:ps decode:true">$WinSQl1 = 'SQLvNextN1'
$WinSQl2 = 'SQLvNextN2'
Copy-SqlSpConfigure -Source $WinSQl1 -Destination $WinSQl2</PRE>
<P><IMG class="alignnone size-full wp-image-3519" alt="6 - Copy Configurations.gif" src="https://blog.robsewell.com/assets/uploads/2017/02/6-copy-configurations.gif?resize=630%2C275&amp;ssl=1" width=630 height=275 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/6-copy-configurations.gif?fit=630%2C275&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/6-copy-configurations.gif?fit=300%2C131&amp;ssl=1" data-image-description="" data-image-title="6-copy-configurations" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1845,806" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/6-copy-configurations.gif?fit=1845%2C806&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/6-copy-configurations/#main" data-attachment-id="3519"></P>
<P>and we can see that those configurations&nbsp;are now the same for those two servers by comparing them like before.</P>
<P><IMG class="alignnone size-full wp-image-3522" alt="7 - compare configurations.PNG" src="https://blog.robsewell.com/assets/uploads/2017/02/7-compare-configurations.png?resize=630%2C326&amp;ssl=1" width=630 height=326 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/7-compare-configurations.png?fit=630%2C326&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/7-compare-configurations.png?fit=300%2C155&amp;ssl=1" data-image-description="" data-image-title="7-compare-configurations" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1421,735" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/7-compare-configurations.png?fit=1421%2C735&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/7-compare-configurations/#main" data-attachment-id="3522"></P>
<P>We can use <A href="https://dbatools.io/Get-DbaSpConfigure">Get-DbaSpConfigure </A>with Linux servers as well but we need to use SQL authentication like so (No, I don’t know why I used two v’s!)</P><PRE class="lang:ps decode:true">$linuxSQL = 'LinuxvvNext'
$cred = Get-Credential -UserName SA -Message "Linux SQL Auth"
$linuxSpConfigure = Get-DbaSpConfigure&amp;nbsp; -SqlServer $linuxSQL -SqlCredential $cred
$linuxSpConfigure | ogv</PRE>
<P>and compare the three servers like so</P><PRE class="lang:ps decode:true">$WinSQl1 = 'SQLvNextN1'
$WinSQl2 = 'SQLvNextN2'
$linuxSQL = 'LinuxvvNext'
$cred = Get-Credential -UserName SA -Message "Linux SQL Auth"
&amp;lt;div&amp;gt;$Win1SPConfigure = Get-DbaSpConfigure -SqlServer $WinSQl1
$Win2SPConfigure = Get-DbaSpConfigure -SqlServer $WinSQl2
$linuxSpConfigure = Get-DbaSpConfigure&amp;nbsp; -SqlServer $linuxSQL -SqlCredential $cred
$propcompare = foreach ($prop in $Win1SPConfigure) {
[pscustomobject]@{
Config = $prop.DisplayName
'Windows Node1 setting' = $prop.RunningValue
'Windows Node2 Setting' = $Win2SPConfigure | Where DisplayName -eq $prop.DisplayName | Select -ExpandProperty RunningValue
'Linux Setting' = $linuxSpConfigure | Where DisplayName -eq $prop.DisplayName | Select -ExpandProperty RunningValue
}
}
$propcompare | ogv</PRE>
<P>and see the differences for the Linux Server</P>
<P><IMG class="alignnone size-full wp-image-3536" alt="8 - Compare Linux Configs.PNG" src="https://blog.robsewell.com/assets/uploads/2017/02/8-compare-linux-configs.png?resize=630%2C319&amp;ssl=1" width=630 height=319 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/8-compare-linux-configs.png?fit=630%2C319&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/8-compare-linux-configs.png?fit=300%2C152&amp;ssl=1" data-image-description="" data-image-title="8-compare-linux-configs" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1423,721" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/8-compare-linux-configs.png?fit=1423%2C721&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/8-compare-linux-configs/#main" data-attachment-id="3536"></P>
<P>we can export the Linux configuration using <A href="https://dbatools.io/Export-SqlSpConfigure" target=_blank>Export-SqlSpConfigure</A></P>
<P><IMG class="alignnone size-full wp-image-3540" alt="9 - Export Linux Config.PNG" src="https://blog.robsewell.com/assets/uploads/2017/02/9-export-linux-config.png?resize=630%2C304&amp;ssl=1" width=630 height=304 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/9-export-linux-config.png?fit=630%2C304&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/9-export-linux-config.png?fit=300%2C145&amp;ssl=1" data-image-description="" data-image-title="9-export-linux-config" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1652,796" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/9-export-linux-config.png?fit=1652%2C796&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/9-export-linux-config/#main" data-attachment-id="3540"></P>
<P>So now lets copy the configuration changes from the Windows Server to the Linux Server</P>
<P><IMG class="alignnone size-full wp-image-3554" alt="10 - Copy Configuration to Linux.gif" src="https://blog.robsewell.com/assets/uploads/2017/02/10-copy-configuration-to-linux.gif?resize=630%2C301&amp;ssl=1" width=630 height=301 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/10-copy-configuration-to-linux.gif?fit=630%2C301&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/10-copy-configuration-to-linux.gif?fit=300%2C143&amp;ssl=1" data-image-description="" data-image-title="10-copy-configuration-to-linux" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1886,902" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/10-copy-configuration-to-linux.gif?fit=1886%2C902&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/10-copy-configuration-to-linux/#main" data-attachment-id="3554"></P>
<P>There was some Red text there you will notice. This is because there are unsupported features in Linux as you can see in the <A href="https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-release-notes" target=_blank>SQL Server on Linux Release Notes</A> The errors from the command are</P>
<P>Database Mail XPs to 0. Feature may not be supported.<BR>SMO and DMO XPs to 1. Feature may not be supported.<BR>Ole Automation Procedures to 0. Feature may not be supported.<BR>xp_cmdshell to 0. Feature may not be supported.<BR>Ad Hoc Distributed Queries to 0. Feature may not be supported.<BR>Replication XPs to 0. Feature may not be supported.<BR>contained database authentication to 0. Feature may not be supported.<BR>hadoop connectivity to 0. Feature may not be supported.<BR>polybase network encryption to 1. Feature may not be supported.<BR>remote data archive to 0. Feature may not be supported.<BR>allow polybase export to 0. Feature may not be supported.</P>
<P>But if we compare the configurations again, we can see that the settings we wanted&nbsp;have been altered successfully</P>
<P><IMG class="alignnone size-full wp-image-3562" alt="11 - Compare Linux Configs again.PNG" src="https://blog.robsewell.com/assets/uploads/2017/02/11-compare-linux-configs-again.png?resize=630%2C323&amp;ssl=1" width=630 height=323 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/11-compare-linux-configs-again.png?fit=630%2C323&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/11-compare-linux-configs-again.png?fit=300%2C154&amp;ssl=1" data-image-description="" data-image-title="11-compare-linux-configs-again" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1422,730" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/11-compare-linux-configs-again.png?fit=1422%2C730&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/11-compare-linux-configs-again/#main" data-attachment-id="3562"></P>
<P>Lets reset the configuration on the Linux server using <A href="https://dbatools.io/Import-SqlSpConfigure" target=_blank>Import-SqlSpConfigure </A>and the Linuxconfig-backup.sql file created before any changes</P>
<P><IMG class="alignnone size-full wp-image-3567" alt="12 - Import backup Linux configuration.gif" src="https://blog.robsewell.com/assets/uploads/2017/02/12-import-backup-linux-configuration.gif?resize=630%2C301&amp;ssl=1" width=630 height=301 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/12-import-backup-linux-configuration.gif?fit=630%2C301&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/12-import-backup-linux-configuration.gif?fit=300%2C143&amp;ssl=1" data-image-description="" data-image-title="12-import-backup-linux-configuration" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1886,902" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/12-import-backup-linux-configuration.gif?fit=1886%2C902&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/12-import-backup-linux-configuration/#main" data-attachment-id="3567"></P>
<P>Interestingly this time we only had an error for Database Mail XPs, but as you can see below the Linux Configuration has been reset back to the original values.</P>
<P><IMG class="alignnone size-full wp-image-3570" alt=13-configuration-comapre-back-to-original src="https://blog.robsewell.com/assets/uploads/2017/02/13-configuration-comapre-back-to-original.png?resize=630%2C322&amp;ssl=1" width=630 height=322 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/13-configuration-comapre-back-to-original.png?fit=630%2C322&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/13-configuration-comapre-back-to-original.png?fit=300%2C153&amp;ssl=1" data-image-description="" data-image-title="13-configuration-comapre-back-to-original" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1425,728" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/13-configuration-comapre-back-to-original.png?fit=1425%2C728&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/13-configuration-comapre-back-to-original/#main" data-attachment-id="3570"></P>
<P>Lets export the configuration from the Windows server to a file and import it onto the Linux server to see what happens</P>
<P><IMG class="alignnone size-full wp-image-3575" alt="14 - Import Windows configuration to Linux.gif" src="https://blog.robsewell.com/assets/uploads/2017/02/14-import-windows-configuration-to-linux.gif?resize=630%2C301&amp;ssl=1" width=630 height=301 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/14-import-windows-configuration-to-linux.gif?fit=630%2C301&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/14-import-windows-configuration-to-linux.gif?fit=300%2C143&amp;ssl=1" data-image-description="" data-image-title="14-import-windows-configuration-to-linux" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1886,902" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/14-import-windows-configuration-to-linux.gif?fit=1886%2C902&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/14-import-windows-configuration-to-linux/#main" data-attachment-id="3575"></P>
<P>Again only an error for Database Mail XPs, and we can see the configurations are again matching.</P>
<P><IMG class="alignnone size-full wp-image-3578" alt="15 - Final Compare.PNG" src="https://blog.robsewell.com/assets/uploads/2017/02/15-final-compare.png?resize=630%2C324&amp;ssl=1" width=630 height=324 data-recalc-dims="1" loading="lazy" data-large-file="https://blog.robsewell.com/assets/uploads/2017/02/15-final-compare.png?fit=630%2C324&amp;ssl=1" data-medium-file="https://blog.robsewell.com/assets/uploads/2017/02/15-final-compare.png?fit=300%2C154&amp;ssl=1" data-image-description="" data-image-title="15-final-compare" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-comments-opened="1" data-orig-size="1425,733" data-orig-file="https://blog.robsewell.com/assets/uploads/2017/02/15-final-compare.png?fit=1425%2C733&amp;ssl=1" data-permalink="https://blog.robsewell.com/sql-vnext-sp_configure-on-windows-and-linux-with-dbatools/15-final-compare/#main" data-attachment-id="3578"></P>
<P>Hopefully, this post has been of use in exploring the *SpConfigure* commands in <A href="https://dbatools.io" target=_blank>dbatools</A>&nbsp;and how you can use them to get the sp_configure output, compare it between servers, Export and import it to and from files, as well as copy it between servers for both Windows and Linux. Remember these commands have been tested from SQL 2000 to SQL vNext so they should work for you across your estate</P>
<P>&nbsp;</P>
<P>Happy Automating!</P>
<P>&nbsp;</P>

